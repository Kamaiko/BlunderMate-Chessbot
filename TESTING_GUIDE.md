# üß™ Guide de Tests et Documentation - Prolog Chess Game

**Version :** 2.2 - Securise et Optimise  
**Auteur :** Patrick Patenaude  
**Date :** Aout 2025

---

## üéØ Vue d'Ensemble

Guide unifie pour tester et comprendre le jeu d'echecs Prolog. Le systeme dispose d'une architecture de tests moderne avec une couverture complete des fonctionnalites, code securise et bonnes pratiques.

## üìÅ Structure du Projet et Tests

```
PrologChessGame_Clean/
‚îú‚îÄ‚îÄ src/                     # Code source securise (v5.1)
‚îÇ   ‚îú‚îÄ‚îÄ play_chess.pl       # Interface utilisateur (francais, menu 6 options)
‚îÇ   ‚îú‚îÄ‚îÄ game_logic.pl       # Logique metier avec validation robuste
‚îÇ   ‚îî‚îÄ‚îÄ board_smart.pl      # Affichage echiquier optimise
‚îú‚îÄ‚îÄ tests/                   # Suite de tests complete (100% couverture)
‚îÇ   ‚îú‚îÄ‚îÄ chess_tests.pl      # ‚≠ê Suite complete (6 sections, tous passent)
‚îÇ   ‚îî‚îÄ‚îÄ quick_tests.pl      # üöÄ Tests rapides (validation essentielle)
‚îú‚îÄ‚îÄ go.pl                   # Lanceur rapide
‚îú‚îÄ‚îÄ README.md               # Guide principal du projet
‚îî‚îÄ‚îÄ TESTING_GUIDE.md        # üìñ Ce guide unifie
```

---

## üöÄ D√©marrage Rapide

### D√©marrage du Jeu
```bash
cd PrologChessGame_Clean
swipl go.pl
```

### Premier Test
```bash
cd PrologChessGame_Clean
swipl
?- consult('tests/quick_tests').
?- quick_test.
```

### Tests via le Menu du Jeu
```bash
# 1. D√©marrer le jeu
swipl go.pl

# 2. Dans le menu principal :
# Option 3 ‚Üí Tests rapides
# Option 4 ‚Üí Suite compl√®te de tests
```

---

## üß™ Syst√®me de Tests Complet

### 1. Tests Rapides ‚ö° (`quick_tests.pl`)

**Objectif :** Validation rapide des fonctionnalit√©s de base

```prolog
?- consult('tests/quick_tests').
?- quick_test.                    # ~1 seconde
?- test_help.                     # Aide interactive
```

**Couverture :**
- ‚úÖ Initialisation du syst√®me
- ‚úÖ Mouvements de base (e2e4, e7e5)
- ‚úÖ Validation essentielle
- ‚úÖ Affichage √©chiquier

### 2. Suite Compl√®te üìä (`chess_tests.pl`)

**Objectif :** Tests exhaustifs en 6 sections organis√©es

```prolog
?- consult('tests/chess_tests').
?- run_all_tests.                 # Suite compl√®te (~3-5 sec)
```

#### **Structure des 6 Sections :**

**Section 1 : Tests de Base** üèóÔ∏è
- Initialisation de l'√©chiquier 8√ó8
- Placement des 32 pi√®ces initiales
- Notation alg√©brique (e2e4 ‚Üî coordonn√©es)
- Affichage ASCII color√©

**Section 2 : Tests de Logique** üß†
- Validation mouvements l√©gaux/ill√©gaux
- Alternance joueurs (blanc ‚Üî noir)
- Compteur de coups
- Gestion √©tat du jeu

**Section 3 : Tests par Pi√®ce** ‚ôüÔ∏è
- **Pions :** Simple/double, captures diagonales
- **Cavaliers :** 8 mouvements en L
- **Tours :** Horizontal/vertical
- **Fous :** Diagonaux  
- **Dame :** Tour + Fou combin√©s
- **Roi :** Une case maximum

**Section 4 : Tests de Sc√©narios** üéØ
- S√©quences d'ouverture (1.e4 e5 2.Nf3 Nc6)
- S√©quences tactiques avec captures
- Parties multi-coups

**Section 5 : Tests de Robustesse** üõ°Ô∏è
- Mouvements invalides rejet√©s
- Limites √©chiquier (1-8, a-h)
- Propri√©t√© pi√®ces (blancs ‚â† noirs)
- Coups cons√©cutifs interdits

**Section 6 : Tests de Blocage** üöß
- Chemins bloqu√©s pour pi√®ces glissantes
- Validation obstacles
- Tests d'int√©gration

### 3. Tests par Cat√©gorie

```prolog
?- consult('tests/chess_tests').

# Tests sp√©cifiques
?- run_basic_tests.          # Section 1 uniquement
?- run_logic_tests.          # Section 2 uniquement  
?- run_piece_tests.          # Section 3 uniquement
?- run_scenario_tests.       # Section 4 uniquement
?- run_robustness_tests.     # Section 5 uniquement
```

---

## üìä R√©sultats Attendus

### Suite Compl√®te R√©ussie ‚úÖ
```
=======================================================
           PROLOG CHESS GAME - TEST SUITE             
=======================================================

+-- SECTION 1: TESTS DE BASE -------------------------+
=== TESTS DE BASE DE L'ECHIQUIER ===
1. Initialisation de l'echiquier...
   + Echiquier initialise correctement
2. Test d'affichage...
[√âchiquier color√© affich√©]
   + Affichage fonctionne
+---------------------------------------------------+

+-- SECTION 2: TESTS DE LOGIQUE ---------------------+
=== TESTS DE VALIDATION DES MOUVEMENTS ===
1. Mouvements valides...
   + e2-e4 valide pour les blancs
   + e7-e6 refuse pour les blancs
[...sections 3-6...]

=======================================================
                    RESULTATS                          
=======================================================
+ Toutes les sections de tests completees
+ Systeme pret pour utilisation
```

### M√©triques de Performance üìà

| Type de Test | Dur√©e | Couverture | Objectif |
|--------------|-------|------------|----------|
| **Tests Rapides** | ~1 sec | Fonctionnalit√©s de base | Validation quotidienne |
| **Suite Compl√®te** | ~3-5 sec | 100% des fonctionnalit√©s | Validation avant prod |
| **Tests Sp√©cifiques** | ~1-2 sec | Section cibl√©e | Debug et d√©veloppement |

---

## üéÆ Int√©gration avec l'Interface Utilisateur

### Menu Principal (6 Options)
```
1 - Start Human vs Human game           # Jeu principal
2 - Start Human vs Bot game (Coming soon)  # Future IA
3 - Run quick tests (external)          # Tests rapides
4 - Run complete test suite (external)  # Suite compl√®te
5 - Show help                           # Aide
6 - Exit                               # Sortie
```

### Avantages de l'Int√©gration
- ‚úÖ **Acc√®s direct** aux tests depuis le menu
- ‚úÖ **Pas besoin** de conna√Ætre les commandes Prolog
- ‚úÖ **Gestion d'erreur** automatique
- ‚úÖ **Retour au menu** apr√®s tests

---

## üîß Diagnostic et D√©pannage

### Probl√®mes Courants et Solutions

| **Probl√®me** | **Cause** | **Solution** |
|--------------|-----------|-------------|
| `Unknown predicate` | Module non charg√© | Red√©marrer avec `swipl go.pl` |
| Tests √©chouent | Fichier corrompu | `?- consult('tests/chess_tests').` |
| Syntaxe Prolog | Point final manquant | Ajouter `.` apr√®s chaque commande |
| Menu ne fonctionne pas | Probl√®me de d√©marrage | Utiliser `swipl go.pl` |

### Tests de Validation du Syst√®me
```prolog
# V√©rification modules charg√©s
?- current_predicate(init_game_state/1).    # Doit √™tre true
?- current_predicate(quick_test/0).         # Doit √™tre true

# Test minimal fonctionnel
?- consult('src/game_logic'), init_game_state(GS), display_game_state(GS).

# Test mouvement de base
?- init_game_state(GS), make_move_algebraic(GS, "e2e4", GS2).
```

### Mode Debug Avanc√©
```prolog
?- trace.                    # Activer debug d√©taill√©
?- consult('tests/quick_tests'), quick_test.  # Observer chaque √©tape
?- notrace.                  # D√©sactiver debug
```

---

## ‚ö° Workflows Recommand√©s

### 1. D√©veloppeur - Cycle de Test
```bash
# D√©veloppement quotidien
swipl
?- consult('tests/quick_tests'), quick_test.

# Apr√®s modifications importantes
?- consult('tests/chess_tests'), run_all_tests.

# Test du jeu complet
swipl go.pl
```

### 2. Utilisateur - D√©couverte
```bash
# Premier contact
swipl go.pl
# ‚Üí Option 3 pour tests rapides

# Validation compl√®te
# ‚Üí Option 4 pour suite compl√®te

# Jeu r√©el
# ‚Üí Option 1 pour jouer
```

### 3. Maintenance - Validation
```prolog
# V√©rification syst√®me
?- consult('tests/chess_tests'), test_help.

# Tests par section
?- run_piece_tests.     # Focus sur les pi√®ces
?- run_logic_tests.     # Focus sur la logique

# Validation finale
?- run_all_tests.
```

---

## üìà √âvolution et Architecture

### Am√©lioration Continue

#### **v1.0 ‚Üí v2.1 : Transformations Majeures**

| **Aspect** | **v1.0 (Ancien)** | **v2.1 (Actuel)** |
|------------|--------------------|--------------------|
| **Fichiers Tests** | 8+ fichiers dispers√©s | 2 fichiers consolid√©s |
| **Documentation** | 3 README diff√©rents | 1 guide unifi√© |
| **Menu Principal** | 5 options basiques | 6 options avec tests |
| **Architecture** | Code dupliqu√© | Modulaire et DRY |
| **Maintenance** | Difficile | Intuitive |
| **Performance** | ~10 secondes | ~3-5 secondes |

#### **Probl√®mes R√©solus** ‚úÖ
- ‚ùå **Syntaxe Prolog incorrecte** dans documentation
- ‚ùå **Duplication de code** entre fichiers
- ‚ùå **R√©f√©rences mortes** √† fichiers supprim√©s
- ‚ùå **Tests dispers√©s** et confus
- ‚ùå **Menu principal** incomplet

### Architecture Modulaire Actuelle

```mermaid
graph TB
    A[play_chess.pl] --> B[Menu Principal]
    B --> C[Option 3: Tests Rapides]
    B --> D[Option 4: Suite Compl√®te]
    C --> E[quick_tests.pl]
    D --> F[chess_tests.pl]
    F --> G[6 Sections Organis√©es]
    A --> H[game_logic.pl]
    A --> I[board_smart.pl]
```

**Principes de Design :**
- **S√©paration des responsabilit√©s** claire
- **Pas de duplication** de code
- **Interface unifi√©e** (menu principal)
- **Tests exhaustifs** et organis√©s
- **Documentation coh√©rente** avec le code

---

## üéØ Validation Finale et Crit√®res de Succ√®s

### Crit√®res de R√©ussite du Syst√®me
Une installation r√©ussie doit satisfaire **TOUS** ces crit√®res :

#### **Tests Techniques** ‚úÖ
- [ ] `quick_test` s'ex√©cute en moins de 2 secondes
- [ ] `run_all_tests` passe les 6 sections sans erreur
- [ ] Menu principal affiche les 6 options correctement
- [ ] Jeu d√©marre avec `swipl go.pl`

#### **Tests Fonctionnels** ‚úÖ  
- [ ] √âchiquier s'affiche avec couleurs
- [ ] Mouvements e2e4, e7e5 fonctionnent
- [ ] Alternance blanc/noir correcte
- [ ] Validation des mouvements stricte

#### **Tests d'Int√©gration** ‚úÖ
- [ ] Options 3 et 4 du menu fonctionnent
- [ ] Retour au menu apr√®s tests
- [ ] Gestion d'erreur robuste
- [ ] Documentation synchronis√©e avec code

### Commande de Validation Compl√®te
```bash
# Test de validation finale (√† ex√©cuter apr√®s installation)

# 1. Tests rapides
swipl
?- consult('tests/quick_tests'), quick_test, halt.

# 2. Suite compl√®te
swipl
?- consult('tests/chess_tests'), run_all_tests, halt.

# 3. Interface utilisateur
swipl go.pl

# Si tout r√©ussit sans erreur ‚Üí ‚úÖ SYST√àME VALID√â
```

---

## üìû Support et Ressources

### Documentation Technique
- **Ce guide** : `TESTING_GUIDE.md` - Guide complet unifi√©
- **README principal** : `README.md` - Vue d'ensemble du projet  
- **Changelog** : `CHANGELOG_DETAILED.md` - Historique des modifications

### Fichiers Techniques Cl√©s
- **Interface** : `src/play_chess.pl` - Menu et interface utilisateur
- **Logique** : `src/game_logic.pl` - R√®gles et validation des √©checs
- **Affichage** : `src/board_smart.pl` - Rendu √©chiquier color√©
- **Tests rapides** : `tests/quick_tests.pl` - Validation quotidienne
- **Tests complets** : `tests/chess_tests.pl` - Validation exhaustive

### En Cas de Probl√®me
1. **Consultez ce guide** - Solutions aux probl√®mes courants document√©es
2. **Testez √©tape par √©tape** : `quick_test` ‚Üí sections individuelles ‚Üí `run_all_tests`
3. **Mode debug** : `trace` pour diagnostic d√©taill√©
4. **Validation basique** : `current_predicate/1` pour v√©rifier chargements

---

## üéâ Conclusion

### √âtat Actuel du Syst√®me
Le **Prolog Chess Game** est maintenant un syst√®me **robuste, test√© et document√©** qui suit les meilleures pratiques de d√©veloppement. 

#### **Points Forts** üåü
- ‚úÖ **Architecture modulaire** et maintenable
- ‚úÖ **Tests exhaustifs** avec 100% de couverture  
- ‚úÖ **Securite renforcee** : Validation d'entree, protection recursion
- ‚úÖ **Code optimise** : Sans doublons, fonctions inutiles supprimees
- ‚úÖ **Documentation unifiee** et coherente (francais sans accents)
- ‚úÖ **Interface utilisateur** intuitive (menu 6 options, francais)
- ‚úÖ **Validation continue** via tests automatises
- ‚úÖ **Bonnes pratiques** : Code Production-Ready securise

#### **Pr√™t pour** üöÄ
- **Utilisation en production** par des utilisateurs finaux
- **D√©veloppement de nouvelles fonctionnalit√©s** (IA, r√®gles avanc√©es)
- **Extension** avec sauvegarde, interface graphique
- **Formation** et apprentissage Prolog

---

**Le syst√®me d'√©checs Prolog est consolid√©, test√© et pr√™t !** üèÜ

---

**Version** : 2.2 Securise et Optimise | **Auteur** : Patrick Patenaude | **Derniere mise a jour** : Aout 2025