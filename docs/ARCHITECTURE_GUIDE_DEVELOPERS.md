# ­ЪЈЌ№ИЈ GUIDE ARCHITECTURE - D├Еveloppeurs Prolog Chess Game

## ­ЪЊІ **VUE D'ENSEMBLE SYST├ѕME**

Ce jeu d'├Еchecs Prolog impl├Еmente une architecture modulaire en 6 couches avec une IA n├Еgamax. Le syst├еme est con├Дu pour ├фtre ├Еducatif, maintenable et extensible.

### **­Ъј» Objectif P├Еdagogique**
- D├Еmonstration d'IA d'├Еchecs en Prolog
- Impl├Еmentation n├Еgamax avec ├Еlagage alpha-beta
- Architecture modulaire propre et extensible
- Code ├Еducatif niveau universitaire

## ­ЪЈЏ№ИЈ **ARCHITECTURE MODULAIRE**

### **Structure en 6 Couches**

```
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                    INTERFACE UTILISATEUR                    Рћѓ
Рћѓ                     (interface.pl)                          Рћѓ
Рћѓ  Рђб display_title_box() - Menu principal fran├Дais            Рћѓ
Рћѓ  Рђб init_unified_game_state() - Modes de jeu                 Рћѓ
Рћѓ  Рђб display_message() - Affichage plateau et messages        Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                Рћѓ
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                      LOGIQUE M├ЅTIER                         Рћѓ
Рћѓ                       (game.pl)                             Рћѓ
Рћѓ  Рђб valid_move() - Validation des coups                      Рћѓ
Рћѓ  Рђб is_in_check() - D├Еtection ├Еchec/mat/pat                  Рћѓ
Рћѓ  Рђб make_move() - Gestion des ├Еtats de jeu                   Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                Рћѓ
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                    INTELLIGENCE ARTIFICIELLE                Рћѓ
Рћѓ                        (ai.pl)                              Рћѓ
Рћѓ  Рђб negamax_ab() - Algorithme n├Еgamax + alpha-beta           Рћѓ
Рћѓ  Рђб generate_structured_moves() - G├Еn├Еration coups MVV-LVA   Рћѓ
Рћѓ  Рђб choose_ai_move() - Prise de d├Еcision tactique            Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                Рћѓ
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                    ├ЅVALUATION POSITIONNELLE                 Рћѓ
Рћѓ                     (evaluation.pl)                         Рћѓ
Рћѓ  Рђб get_psqt_value() - Tables PSQT                           Рћѓ
Рћѓ  Рђб evaluate_position() - ├Ѕvaluation mat├Еrielle/positionnelleРћѓ
Рћѓ  Рђб evaluate_piece_safety() - S├Еcurit├Е des pi├еces            Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                Рћѓ
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                      R├ѕGLES DES PI├ѕCES                      Рћѓ
Рћѓ                      (pieces.pl)                            Рћѓ
Рћѓ  Рђб can_piece_move() - Mouvements de chaque pi├еce            Рћѓ
Рћѓ  Рђб piece_belongs_to_player() - R├еgles sp├Еciales             Рћѓ
Рћѓ  Рђб get_piece_type() - Validation des coups l├Еgaux           Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                Рћѓ
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                    REPR├ЅSENTATION PLATEAU                   Рћѓ
Рћѓ                      (board.pl)                             Рћѓ
Рћѓ  Рђб valid_chess_position() - ├Ѕchiquier 8├Ќ8                   Рћѓ
Рћѓ  Рђб parse_algebraic_move() - Conversions coordonn├Еes         Рћѓ
Рћѓ  Рђб position_to_algebraic() - Manipulation des positions     Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

### **M├Еtriques du Syst├еme**
- **Total** : ~2000 lignes de code Prolog
- **Modules** : 6 fichiers principaux
- **Tests** : 42 tests automatis├Еs (8 sections)
- **Performance** : 3-4 secondes/coup (profondeur 2)

## ­ЪДа **ALGORITHMES D'INTELLIGENCE ARTIFICIELLE**

### **Algorithme N├Еgamax avec ├Ѕlagage Alpha-Beta**

```
                    ALGORITHME N├ЅGAMAX AVEC ├ЅLAGAGE ALPHA-BETA
                                  (Profondeur 2)

                            N┼њUD RACINE (MAX)
                          Joueur: NOIR | ╬▒=-Рѕъ | ╬▓=+Рѕъ
                          Cherche le MEILLEUR coup
                                     Рћѓ
                        РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћ╝РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
                        Рћѓ            Рћѓ            Рћѓ
                    COUP A        COUP B        COUP C
                   Score: ?      Score: ?      Score: ?
                        Рћѓ            Рћѓ            Рћѓ
                   Joueur: BLANC (MIN - cherche pire coup pour NOIR)
                   ╬▒=-Рѕъ | ╬▓=+Рѕъ
                        Рћѓ
        РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћ╝РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
        Рћѓ              Рћѓ              Рћѓ
   RIPOSTE A1     RIPOSTE A2     RIPOSTE A3
   Score: ?       Score: ?       Score: ?
        Рћѓ              Рћѓ              Рћѓ
        Рќ╝              Рќ╝              Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  ├ЅVALUATION   Рћѓ Рћѓ  ├ЅVALUATION   Рћѓ Рћѓ  ├ЅVALUATION   Рћѓ
Рћѓ   STATIQUE    Рћѓ Рћѓ   STATIQUE    Рћѓ Рћѓ   STATIQUE    Рћѓ
Рћѓ               Рћѓ Рћѓ               Рћѓ Рћѓ               Рћѓ
Рћѓ evaluate_     Рћѓ Рћѓ evaluate_     Рћѓ Рћѓ evaluate_     Рћѓ
Рћѓ position()    Рћѓ Рћѓ position()    Рћѓ Рћѓ position()    Рћѓ
Рћѓ               Рћѓ Рћѓ               Рћѓ Рћѓ               Рћѓ
Рћѓ Mat├Еriel:     Рћѓ Рћѓ Mat├Еriel:     Рћѓ Рћѓ Mat├Еriel:     Рћѓ
Рћѓ Blanc: 3900   Рћѓ Рћѓ Blanc: 3880   Рћѓ Рћѓ Blanc: 3900   Рћѓ
Рћѓ Noir:  3850   Рћѓ Рћѓ Noir:  3900   Рћѓ Рћѓ Noir:  3820   Рћѓ
Рћѓ Diff: +50     Рћѓ Рћѓ Diff: -20     Рћѓ Рћѓ Diff: +80     Рћѓ
Рћѓ               Рћѓ Рћѓ               Рћѓ Рћѓ               Рћѓ
Рћѓ Position:     Рћѓ Рћѓ Position:     Рћѓ Рћѓ Position:     Рћѓ
Рћѓ PSQT: +30     Рћѓ Рћѓ PSQT: -10     Рћѓ Рћѓ PSQT: +25     Рћѓ
Рћѓ               Рћѓ Рћѓ               Рћѓ Рћѓ               Рћѓ
Рћѓ S├Еcurit├Е:     Рћѓ Рћѓ S├Еcurit├Е:     Рћѓ Рћѓ S├Еcurit├Е:     Рћѓ
Рћѓ Pi├еces: +15   Рћѓ Рћѓ Pi├еces: -25   Рћѓ Рћѓ Pi├еces: +10   Рћѓ
Рћѓ               Рћѓ Рћѓ               Рћѓ Рћѓ               Рћѓ
Рћѓ TOTAL: +95    Рћѓ Рћѓ TOTAL: -55    Рћѓ Рћѓ TOTAL: +115   Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ              Рћѓ              Рћѓ
        РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћ╝РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                       Рћѓ
                REMONT├ЅE MIN-MAX
                  (alternance)
                       Рћѓ
                       Рќ╝
            РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
            Рћѓ   MIN s├Еlectionne       Рћѓ
            Рћѓ   min(+95, -55, +115)   Рћѓ
            Рћѓ        = -55            Рћѓ
            Рћѓ                         Рћѓ
            Рћѓ   Valeur remont├Еe       Рћѓ
            Рћѓ   pour COUP A: -55      Рћѓ
            РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                       Рћѓ
                       Рќ╝
            РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
            Рћѓ   Processus r├Еp├Еt├Е      Рћѓ
            Рћѓ   pour COUP B et C      Рћѓ
            Рћѓ                         Рћѓ
            Рћѓ   COUP B: +30           Рћѓ
            Рћѓ   COUP C: +10           Рћѓ
            Рћѓ                         Рћѓ
            Рћѓ   MAX s├Еlectionne       Рћѓ
            Рћѓ   max(-55, +30, +10)    Рћѓ
            Рћѓ        = +30            Рћѓ
            Рћѓ                         Рћѓ
            Рћѓ     CHOIX: COUP B       Рћѓ
            РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

### **M├Еcanisme d'├Ѕlagage Alpha-Beta**

```
                          PRINCIPE DE COUPURE

    ├Ѕtat actuel: ╬▒ = +20 (meilleur trouv├Е pour MAX)
                 ╬▓ = +50 (pire accept├Е par MIN)

    Nouveau coup ├Еvalu├Е: +60

    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ              РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ   TEST:     Рћѓ   +60 РЅЦ +50  Рћѓ   R├ЅSULTAT  Рћѓ
    Рћѓ   ╬▒ РЅЦ ╬▓ ?   Рћѓ              Рћѓ             Рћѓ
    Рћѓ             Рћѓ              Рћѓ   COUPURE   Рћѓ
    Рћѓ +60 РЅЦ +50   Рћѓ  CONDITION   Рћѓ  ALPHA-BETA Рћѓ
    Рћѓ             Рћѓ   REMPLIE    Рћѓ             Рћѓ
    Рћѓ             Рћѓ              Рћѓ Abandon des Рћѓ
    Рћѓ             Рћѓ              Рћѓ coups       Рћѓ
    Рћѓ             Рћѓ              Рћѓ restants    Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў              РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

### **Performance de l'├Ѕlagage**

| Profondeur | N┼Њuds th├Еorie | N┼Њuds r├Еels | R├Еduction |
|------------|---------------|-------------|-----------|
| Depth 1    | 25            | 25          | 0%        |
| **Depth 2 (d├Еfaut)** | **625** | **65** | **90%** |
| | | | |
| **Temps/coup** | **150s** | **0.5-1s** | **40x plus rapide** |

## ­Ъј» **SYST├ѕME D'├ЅVALUATION POSITIONNELLE**

### **Composantes d'├Ѕvaluation**

1. **├Ѕvaluation Mat├Еrielle**
   - Pion : 100 points
   - Cavalier/Fou : 320 points
   - Tour : 500 points
   - Dame : 900 points
   - Roi : 20000 points

2. **Tables PSQT (Piece-Square Tables)**
   - Bonus positionnels selon la case
   - Pions : centre et avancement
   - Pi├еces : contr├┤le du centre et d├Еveloppement

3. **S├Еcurit├Е des Pi├еces**
   - Protection des pi├еces importantes
   - D├Еtection des pi├еces en danger
   - ├Ѕvaluation de la s├Еcurit├Е du roi

### **Fonction d'├Ѕvaluation Compl├еte**

```prolog
evaluate_position(GameState, Player, Score) :-
    count_material_standard(GameState, Player, MaterialScore),
    evaluate_psqt_total(GameState, Player, PositionalScore),
    evaluate_piece_safety(GameState, Player, SafetyScore),
    Score is MaterialScore + PositionalScore + SafetyScore.
```

## ­ЪћД **OPTIMISATIONS TECHNIQUES**

### **G├Еn├Еration de Coups MVV-LVA**

**MVV-LVA** : Most Valuable Victim - Least Valuable Attacker

```prolog
move_score(Board, Player, Move, FinalScore) :-
    move_score_with_defense(Board, Player, Move, BaseScore),
    detect_promotion_bonus(Move, Board, Player, PromotionBonus),
    detect_check_bonus(Board, Player, Move, CheckBonus),
    FinalScore is BaseScore + PromotionBonus + CheckBonus.
```

### **Ordre de Tri des Coups**

1. **Captures** : Tri├Еes par valeur MVV-LVA
2. **Promotions** : Bonus ├Еlev├Е pour promotion dame
3. **├Ѕchecs** : Bonus pour coups donnant ├Еchec
4. **Coups calmes** : D├Еveloppement et positionnement

## ­ЪљЏ **PROBL├ѕMES CONNUS ET SOLUTIONS**



## ­Ъџђ **OPTIMISATIONS FUTURES**

### **Court Terme**
1. **Correction bug ai.pl:281** - Priorit├Е critique
2. **Optimisation PSQT** - Ajustement valeurs positionnelles
3. **Ajout roque** - R├еgle sp├Еciale du roque (petit et grand roque)
4. **Ajout en passant** - Capture en passant des pions
5. **Am├Еlioration interface** - GUI graphique

### **Moyen Terme**
1. **Tables de transposition** - Cache des positions ├Еvalu├Еes
2. **Recherche de quiescence** - ├Ѕvaluation des captures forc├Еes
3. **R├Еpertoire d'ouvertures** - Base de donn├Еes d'ouvertures
4. **Endgame tablebase** - Positions de fin de partie

### **Long Terme**
1. **Machine Learning** - Apprentissage des ├Еvaluations
2. **Parall├Еlisation** - Recherche multi-thread
3. **Optimisation m├Еmoire** - Structures de donn├Еes efficaces
4. **Interface web** - Version en ligne


## ­ЪЊі **M├ЅTRIQUES DE PERFORMANCE**

### **Temps de R├Еponse**
- **Profondeur 1** : ~0.1s/coup
- **Profondeur 2** : ~3-4s/coup (d├Еfaut)

### **Efficacit├Е de l'├Ѕlagage**
- **Sans ├Еlagage** : 15625 n┼Њuds (th├Еorique)
- **Avec alpha-beta** : 195 n┼Њuds (r├Еel)
- **R├Еduction** : 98% des n┼Њuds ├Еlagu├Еs

### **Qualit├Е de l'IA**
- **Niveau** : Club amateur (~1200-1400 ELO)
- **Forces** : Tactique basique, d├Еveloppement correct
- **Faiblesses** : Planification long terme, fin de partie

## ­ЪДф **TESTS ET VALIDATION**

### **Suite de Tests Automatis├Еs**

**8 Sections de Tests** :
1. **Tests fondamentaux** - Plateau, parsing, ├Еtat
2. **Tests des pi├еces** - Mouvements et r├еgles
3. **Tests ├Еchec/mat** - D├Еtection optimis├Еe
4. **Tests de robustesse** - Validation renforc├Еe
5. **Tests d'int├Еgration** - S├Еquences de jeu
6. **Tests PSQT** - Tables positionnelles
7. **Tests alpha-beta** - ├Ѕlagage
8. **Tests de d├Еtection d├Еfense** - Bug critique

**Ex├Еcution** :
```prolog
consult('tests/tests.pl').
run_all_tests.
```

## ­ЪЊџ **R├ЅF├ЅRENCES TECHNIQUES**

### **Algorithmes d'├Ѕchecs**
- **Lichess Chess Engine** - https://github.com/lichess-org/lila
- **Stockfish Engine** - https://github.com/official-stockfish/Stockfish
- **Alpha-Beta Pruning (Stanford)** - https://web.stanford.edu/~msirota/soco/alphabeta.html
- **N├Еgamax Algorithm** - https://www.chessprogramming.org/Negamax
- **Piece-Square Tables** - https://www.chessprogramming.org/Piece-Square_Tables

### **Prolog et IA**
- **SWI-Prolog Documentation** - https://www.swi-prolog.org/pldoc/


## ­Ъћё **MAINTENANCE ET ├ЅVOLUTION**

### **Cycle de D├Еveloppement**
1. **Analyse** - Identification des probl├еmes
2. **Conception** - Architecture des solutions
3. **Impl├Еmentation** - D├Еveloppement en Prolog
4. **Tests** - Validation et v├Еrification
5. **Documentation** - Mise ├а jour du guide

### **Standards de Code**
- **Nommage** : snake_case pour pr├Еdicats, camelCase pour variables
- **Commentaires** : Fran├Дais, explication des algorithmes complexes
- **Modularit├Е** : S├Еparation claire des responsabilit├Еs
- **Tests** : Couverture compl├еte des fonctionnalit├Еs

---

**Derni├еre mise ├а jour** : 9 septembre 2025
